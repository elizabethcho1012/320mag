// 320MAG NEW SEXY ì½˜í…ì¸  ê°€ì´ë“œë¼ì¸ ë¡œë”
// docs/CONTENT_GUIDELINES.md ê¸°ë°˜ìœ¼ë¡œ AI í”„ë¡¬í”„íŠ¸ ìƒì„±

/**
 * ì½˜í…ì¸  ê°€ì´ë“œë¼ì¸ì„ AI í”„ë¡¬í”„íŠ¸ìš©ìœ¼ë¡œ ìš”ì•½
 */
export function getGuidelinesPrompt(): string {
  return `
ğŸ“‹ 320MAG NEW SEXY ì½˜í…ì¸  ê°€ì´ë“œë¼ì¸

ğŸ¯ íƒ€ê²Ÿ ë…ì: Ageless Generation (AGene, ì—ì´ì§„)
- ì ˆëŒ€ "ì¤‘ë…„", "ì‹œë‹ˆì–´" ê°™ì€ í‘œí˜„ ì‚¬ìš© ê¸ˆì§€!
- "AGene", "Ageless Generation", "ì—ì´ì§„" ë˜ëŠ” êµ¬ì²´ì  ì—°ë ¹ëŒ€ ì‚¬ìš©
í•µì‹¬ ì² í•™: "ë‚˜ì´ ë“¤ì–´ë„ ì¶©ë¶„íˆ ì„¹ì‹œí•  ìˆ˜ ìˆë‹¤"
ì„¹ì‹œí•¨ = ê±´ê°•ì„± + í™œë™ì„± + í™•ì‹¤í•œ ê´€ë¦¬

âœ… ì í•©í•œ ì½˜í…ì¸ :
- 40~50ëŒ€ ë¼ì´í”„ìŠ¤íƒ€ì¼ì— ë§ëŠ” ë‚´ìš©
- ì•ˆí‹°ì—ì´ì§•, ê±´ê°• ê´€ë¦¬ ì •ë³´
- ì„±ìˆ™í•œ ê´€ê³„ì™€ ì¹œë°€ê°
- ì¬ì •ì  ì—¬ìœ ë¥¼ ê³ ë ¤í•œ í”„ë¦¬ë¯¸ì—„ ì»¨í…ì¸ 
- AGene ì»¤ë¦¬ì–´ ì „í™˜, ìê¸°ê³„ë°œ
- ë¼ì´í”„ìŠ¤íƒ€ì¼ ì—…ê·¸ë ˆì´ë“œ, ë¯¸ë˜ ì„¤ê³„

ğŸš« ë¶€ì í•©í•œ ì½˜í…ì¸  (í•„í„°ë§ ëŒ€ìƒ):
- 20~30ëŒ€ íƒ€ê²Ÿ ì½˜í…ì¸  (ì Šì€ íŠ¸ë Œë“œ, íŒ¨ìŠ¤íŠ¸íŒ¨ì…˜)
- ì¼ë°˜ì ì¸ ì´ˆí˜¼ ì›¨ë”© ì •ë³´ (20ëŒ€ ì‹ ë¶€ ë©”ì´í¬ì—…, ì›¨ë”© ë“œë ˆìŠ¤)
  â€» ì˜ˆì™¸: 40ëŒ€ ì´ìƒ ì¬í˜¼, ì‹œë‹ˆì–´ ì›¨ë”©ì€ í—ˆìš©
- ëŒ€í•™ìƒ/ì‹ ì…ì‚¬ì› íƒ€ê²Ÿ (ì·¨ì—… ì¤€ë¹„ ë“±)
- ê²€ì¦ë˜ì§€ ì•Šì€ ê±´ê°• ì •ë³´
- ê³¼ë„í•œ ì†Œë¹„ ì¡°ì¥, ì™¸ëª¨ ì§€ìƒì£¼ì˜

ğŸ“ ì—°ë ¹ëŒ€ ë§ì¶¤ ë¦¬ë¼ì´íŒ… ê°€ì´ë“œ:

âŒ ë‚˜ìœ ì˜ˆ:
"20ëŒ€ ì‹ ë¶€ë¥¼ ìœ„í•œ ì™„ë²½í•œ ì›¨ë”© í—¤ì–´ìŠ¤íƒ€ì¼"

âœ… ì¢‹ì€ ì˜ˆ:
"40ëŒ€ ì´í›„ ì¬í˜¼, ìì—°ìŠ¤ëŸ¬ìš´ ì•„ë¦„ë‹¤ì›€ì´ ë¹›ë‚˜ëŠ” ì‹œê°„"
"ì¸ìƒì˜ ë‘ ë²ˆì§¸ ê²°í˜¼ì‹, ì§„ì§œ ë‚˜ë¥¼ ë³´ì—¬ì£¼ëŠ” ì›¨ë”© ìŠ¤íƒ€ì¼"

ğŸš« ê¸ˆì§€ í‘œí˜„:
- "ì Šì–´ ë³´ì´ê¸° ìœ„í•´" â†’ âœ… "ê±´ê°•í•˜ê³  í™œë ¥ ìˆê²Œ"
- "ë‚˜ì´ë¥¼ ìˆ¨ê¸°ë ¤ë©´" â†’ âœ… "ë‚˜ì´ì— ë§ê²Œ ë‹¹ë‹¹í•˜ê²Œ"
- "ëŠ™ì§€ ì•Šìœ¼ë ¤ë©´" â†’ âœ… "ìš°ì•„í•˜ê²Œ ë‚˜ì´ ë“¤ê¸° ìœ„í•´"

ğŸ¨ ì¹´í…Œê³ ë¦¬ë³„ ê°€ì´ë“œ:
- íŒ¨ì…˜: 40~50ëŒ€ ì²´í˜•, ì‹œëŒ€ë¥¼ ì´ˆì›”í•œ í´ë˜ì‹ê³¼ í’ˆì§ˆ
- ë·°í‹°: ì•ˆí‹°ì—ì´ì§• í•µì‹¬, ìì—°ìŠ¤ëŸ¬ìš´ ì•„ë¦„ë‹¤ì›€
- ì—¬í–‰: í¸ì•ˆí•¨ê³¼ í’ˆê²©, ìŠ¬ë¡œìš° íŠ¸ë˜ë¸”, ë¬¸í™” ì²´í—˜
- ì„¹ìŠˆì–¼ë¦¬í‹°: AGene ë¶€ë¶€ ì¹œë°€ê°, ê°±ë…„ê¸°/í˜¸ë¥´ëª¬ ë³€í™”, í’ˆìœ„ ìˆê²Œ
- ê±´ê°•í‘¸ë“œ: ì„±ì¸ë³‘ ì˜ˆë°©, ê³¨ë‹¤ê³µì¦/ê·¼ê°ì†Œì¦, ì†Œí™” ê¸°ëŠ¥ ê³ ë ¤
- ìš´ë™: ê´€ì ˆ ë³´í˜¸ ìš°ì„ , ì ì ˆí•œ ê°•ë„

âš ï¸ í•„ìˆ˜ ì²´í¬:
- 40~50ëŒ€ ë…ìì—ê²Œ ì‹¤ì§ˆì  ë„ì›€ì´ ë˜ëŠ”ê°€?
- ë‚˜ì´ ì°¨ë³„ì  í‘œí˜„ì´ ì—†ëŠ”ê°€?
- ê²€ì¦ëœ ì •ë³´ì¸ê°€?
- íƒ€ê²Ÿ ì—°ë ¹ëŒ€ì™€ ë§ëŠ”ê°€?
`;
}

/**
 * íŠ¹ì • ì¹´í…Œê³ ë¦¬ì˜ ì½˜í…ì¸  í•„í„°ë§ì´ í•„ìš”í•œì§€ íŒë‹¨
 */
export function shouldFilterContent(title: string, content: string, category: string): {
  shouldFilter: boolean;
  reason?: string;
} {
  const text = `${title} ${content}`.toLowerCase();

  // 20~30ëŒ€ ì›¨ë”© ì½˜í…ì¸  í•„í„°ë§
  const weddingKeywords = ['bride', 'bridal', 'wedding', 'ì‹ ë¶€', 'ì›¨ë”©', 'ê²°í˜¼ì‹'];
  const youngKeywords = ['20ëŒ€', 'twenties', 'young bride', 'first wedding'];

  const hasWedding = weddingKeywords.some(kw => text.includes(kw));
  const isYoung = youngKeywords.some(kw => text.includes(kw));

  // ì¬í˜¼/ì‹œë‹ˆì–´ ì›¨ë”© ì˜ˆì™¸
  const isSeniorWedding = text.includes('ì¬í˜¼') || text.includes('remarriage') ||
                          text.includes('40ëŒ€') || text.includes('50ëŒ€') ||
                          text.includes('mature') || text.includes('second wedding');

  if (hasWedding && isYoung && !isSeniorWedding) {
    return {
      shouldFilter: true,
      reason: '20~30ëŒ€ ì´ˆí˜¼ ì›¨ë”© ì½˜í…ì¸ ëŠ” íƒ€ê²Ÿ ì—°ë ¹ëŒ€ì™€ ë§ì§€ ì•ŠìŒ'
    };
  }

  // ëŒ€í•™ìƒ/ì‹ ì…ì‚¬ì› íƒ€ê²Ÿ ì½˜í…ì¸ 
  const careerKeywords = ['ëŒ€í•™ìƒ', 'college student', 'ì‹ ì…ì‚¬ì›', 'new grad', 'ì·¨ì—… ì¤€ë¹„'];
  if (careerKeywords.some(kw => text.includes(kw))) {
    return {
      shouldFilter: true,
      reason: 'ëŒ€í•™ìƒ/ì‹ ì…ì‚¬ì› íƒ€ê²Ÿ ì½˜í…ì¸ '
    };
  }

  // 10ëŒ€/20ëŒ€ ëª…ì‹œ íƒ€ê²Ÿ
  const teenKeywords = ['10ëŒ€', '20ëŒ€', 'teen', 'teenage', 'gen z'];
  if (teenKeywords.some(kw => text.includes(kw))) {
    return {
      shouldFilter: true,
      reason: '10~20ëŒ€ íƒ€ê²Ÿ ì½˜í…ì¸ '
    };
  }

  return { shouldFilter: false };
}

/**
 * ì½˜í…ì¸ ê°€ ê°€ì´ë“œë¼ì¸ì„ ìœ„ë°˜í•˜ëŠ”ì§€ ì²´í¬
 */
export function validateContent(title: string, content: string, category: string): {
  isValid: boolean;
  warnings: string[];
} {
  const warnings: string[] = [];

  // í•„í„°ë§ ì²´í¬
  const filterResult = shouldFilterContent(title, content, category);
  if (filterResult.shouldFilter) {
    warnings.push(`âš ï¸ í•„í„°ë§ ê¶Œì¥: ${filterResult.reason}`);
  }

  // ê¸ˆì§€ í‘œí˜„ ì²´í¬
  const forbiddenPhrases = [
    { phrase: 'ì¤‘ë…„', suggestion: 'AGene / Ageless Generation / ì—ì´ì§„ / 40-50ëŒ€' },
    { phrase: 'ì‹œë‹ˆì–´', suggestion: 'AGene / Ageless Generation / ì—ì´ì§„ / 40-50ëŒ€' },
    { phrase: 'ì Šì–´ ë³´ì´', suggestion: 'ê±´ê°•í•˜ê³  í™œë ¥ ìˆê²Œ' },
    { phrase: 'ë‚˜ì´ë¥¼ ìˆ¨ê¸°', suggestion: 'ë‚˜ì´ì— ë§ê²Œ ë‹¹ë‹¹í•˜ê²Œ' },
    { phrase: 'ëŠ™ì§€ ì•Š', suggestion: 'ìš°ì•„í•˜ê²Œ ë‚˜ì´ ë“¤ê¸°' },
  ];

  forbiddenPhrases.forEach(({ phrase, suggestion }) => {
    if (title.includes(phrase) || content.includes(phrase)) {
      warnings.push(`âš ï¸ ê¸ˆì§€ í‘œí˜„ ë°œê²¬: "${phrase}" â†’ "${suggestion}" ì‚¬ìš© ê¶Œì¥`);
    }
  });

  return {
    isValid: warnings.length === 0,
    warnings
  };
}
