# ì´ë¯¸ì§€-ì½˜í…ì¸  ë§¤ì¹­ ê°œì„  V2

## ğŸš¨ ì‹¬ê°í•œ ë¬¸ì œ ì¬ë°œê²¬

**ì‚¬ë¡€**:
- ì›ë³¸: "Anya Taylor-Joyì˜ ë“œë ˆìŠ¤" + ì´ë¯¸ì§€(Anya ì‚¬ì§„)
- ë¦¬ë¼ì´íŒ…: "Tom Stoppard ì—°ê·¹"
- ê²°ê³¼: ì´ë¯¸ì§€(Anya) â‰  ë‚´ìš©(Tom Stoppard) âŒ

**ê·¼ë³¸ ì›ì¸**:
AIê°€ í”„ë¡¬í”„íŠ¸ ì œì•½ì„ ë¬´ì‹œí•˜ê³  ì›ë³¸ ê¸°ì‚¬ì˜ ë¶€ì°¨ì ì¸ ì–¸ê¸‰(Tom Stoppard)ì„ ì£¼ì œë¡œ ì„ íƒí•¨

---

## ğŸ’¡ ë” ê°•ë ¥í•œ í•´ê²°ì±…

### ì˜µì…˜ A: **ì›ë³¸ ì œëª©ì„ ë¦¬ë¼ì´íŒ… ì œëª©ì— ê°•ì œ ë°˜ì˜** â­ ì¶”ì²œ

**ì•„ì´ë””ì–´**:
```
ì›ë³¸ ì œëª©: "Anya Taylor-Joy Closes Her Marrakech Film Festival..."
ë¦¬ë¼ì´íŒ… ì œëª© í•„ìˆ˜ ìš”ì†Œ: "Anya Taylor-Joy" ë˜ëŠ” "ë§ˆë¼ì¼€ì‹œ ì˜í™”ì œ"
```

**í”„ë¡¬í”„íŠ¸ ìˆ˜ì •**:
```typescript
${hasImage ? `
âš ï¸ í•„ìˆ˜ ìš”êµ¬ì‚¬í•­:
1. ì›ë³¸ ì œëª©: "${originalTitle}"
2. ë¦¬ë¼ì´íŒ… ì œëª©ì— ë°˜ë“œì‹œ ì›ë³¸ì˜ í•µì‹¬ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”
   (ì¸ëª…, ë¸Œëœë“œëª…, ì´ë²¤íŠ¸ëª… ë“±)
3. ì›ë³¸ ê¸°ì‚¬ì˜ ì£¼ì¸ê³µ/ì£¼ì œë¥¼ ì ˆëŒ€ ë°”ê¾¸ì§€ ë§ˆì„¸ìš”
` : ''}
```

---

### ì˜µì…˜ B: **ì£¼ì œ ì¶”ì¶œ + ê²€ì¦ ë‹¨ê³„ ì¶”ê°€**

**ì›Œí¬í”Œë¡œìš°**:
```
1. ì›ë³¸ ê¸°ì‚¬ â†’ ì£¼ì œ ì¶”ì¶œ (GPT-4, 10ì´ˆ)
   "ì£¼ì œ: Anya Taylor-Joyì˜ ë ˆë“œì¹´í« ë“œë ˆìŠ¤"

2. ë¦¬ë¼ì´íŒ… ì‹¤í–‰ (Claude 3.5 Haiku)
   ì œì•½: ìœ„ ì£¼ì œë¥¼ ë°˜ë“œì‹œ ìœ ì§€

3. ë¦¬ë¼ì´íŒ… í›„ ê²€ì¦ (GPT-4, 5ì´ˆ)
   "ë¦¬ë¼ì´íŒ… ì£¼ì œê°€ ì›ë³¸ê³¼ ë™ì¼í•œê°€?" â†’ Yes/No

4. Noë©´ â†’ ì¬ì‹œë„ ë˜ëŠ” ê²½ê³ 
```

**ì¥ì **:
- âœ… ì™„ë²½í•œ ì£¼ì œ ë§¤ì¹­ ë³´ì¥
- âœ… ì´ë¯¸ì§€-ë‚´ìš© 100% ì¼ì¹˜

**ë‹¨ì **:
- âŒ GPT-4 í˜¸ì¶œ 2íšŒ ì¶”ê°€ (ë¹„ìš© +$0.015)
- âŒ ì‹œê°„ 15ì´ˆ ì¶”ê°€
- âŒ ë³µì¡ë„ ì¦ê°€

**ë¹„ìš© ì˜í–¥**:
- ê¸°ì¡´: â‚©27/ê¸°ì‚¬
- ì¶”ê°€: â‚©20/ê¸°ì‚¬ (ê²€ì¦ 2íšŒ)
- í•©ê³„: **â‚©47/ê¸°ì‚¬**
- ì›”ê°„ 90ê°œ: **â‚©4,230** (ì—¬ì „íˆ GPT-4 ë‹¨ë…ë³´ë‹¤ ì €ë ´)

---

### ì˜µì…˜ C: **ì´ë¯¸ì§€ ì—†ì´ ë°œí–‰ (ê·¹ë‹¨ì )**

ë¦¬ë¼ì´íŒ… í›„ ì£¼ì œê°€ ì™„ì „íˆ ë°”ë€ ê²½ìš°:
- featured_image_url = null
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê¸°ë³¸ placeholder í‘œì‹œ

**ì¥ì **:
- âœ… ë¶ˆì¼ì¹˜ ë¬¸ì œ ì™„ì „ ì œê±°

**ë‹¨ì **:
- âŒ ë§¤ê±°ì§„ ë¹„ì£¼ì–¼ í’ˆì§ˆ ì €í•˜

---

## ğŸ¯ ìµœì¢… ê¶Œì¥: ì˜µì…˜ A (ê°•í™”ëœ í”„ë¡¬í”„íŠ¸)

### ë‹¨ê³„ë³„ êµ¬í˜„

#### 1. ì›ë³¸ ì œëª©ì—ì„œ í•µì‹¬ í‚¤ì›Œë“œ ì¶”ì¶œ
```typescript
// ê°„ë‹¨í•œ í‚¤ì›Œë“œ ì¶”ì¶œ (GPT-4 ë¶ˆí•„ìš”)
function extractKeyPerson(title: string): string | null {
  // ëŒ€ë¬¸ìë¡œ ì‹œì‘í•˜ëŠ” 2-3ë‹¨ì–´ ì´ë¦„ ì°¾ê¸°
  const nameMatch = title.match(/([A-Z][a-z]+ [A-Z][a-z]+(?:\s[A-Z][a-z]+)?)/);
  return nameMatch ? nameMatch[0] : null;
}

// ì˜ˆ: "Anya Taylor-Joy Closes..." â†’ "Anya Taylor-Joy"
```

#### 2. í”„ë¡¬í”„íŠ¸ì— ê°•ì œ ì œì•½ ì¶”ê°€
```typescript
const keyPerson = extractKeyPerson(article.title);

const userPrompt = `...
${hasImage && keyPerson ? `
âš ï¸ í•„ìˆ˜ ìš”êµ¬ì‚¬í•­ (ë§¤ìš° ì¤‘ìš”!):
- ì›ë³¸ ê¸°ì‚¬ì˜ ì£¼ì¸ê³µ: "${keyPerson}"
- ë¦¬ë¼ì´íŒ… ì œëª©ê³¼ ë‚´ìš©ì— "${keyPerson}"ì„(ë¥¼) ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”
- ë‹¤ë¥¸ ì‚¬ëŒì„ ì£¼ì œë¡œ ë°”ê¾¸ì§€ ë§ˆì„¸ìš”
- ì›ë³¸ ì´ë¯¸ì§€ëŠ” "${keyPerson}"ì— ê´€í•œ ê²ƒì…ë‹ˆë‹¤
` : ''}
...`;
```

#### 3. ë¦¬ë¼ì´íŒ… í›„ ê²€ì¦ (ê°„ë‹¨í•œ ì²´í¬)
```typescript
// ë¦¬ë¼ì´íŒ… í›„
if (hasImage && keyPerson) {
  const titleContainsPerson = rewritten.title.includes(keyPerson);
  if (!titleContainsPerson) {
    console.warn(`âš ï¸ ê²½ê³ : ë¦¬ë¼ì´íŒ… ì œëª©ì— "${keyPerson}" ëˆ„ë½!`);
    // ì„ íƒì‚¬í•­: ì´ë¯¸ì§€ ì œê±° or ì¬ì‹œë„
  }
}
```

---

## ğŸ“Š ë¹„êµ (ì˜µì…˜ A vs B)

| í•­ëª© | ì˜µì…˜ A (ê°•í™” í”„ë¡¬í”„íŠ¸) | ì˜µì…˜ B (ê²€ì¦ ë‹¨ê³„) |
|------|----------------------|-------------------|
| ì •í™•ë„ | 80-90% | 95-99% |
| ë¹„ìš© | â‚©27/ê¸°ì‚¬ | â‚©47/ê¸°ì‚¬ |
| ì†ë„ | ë³€í™” ì—†ìŒ | +15ì´ˆ |
| ë³µì¡ë„ | ë‚®ìŒ | ì¤‘ê°„ |

---

## ğŸ”§ ì¦‰ì‹œ êµ¬í˜„ (ì˜µì…˜ A)

### Phase 1: í‚¤ì›Œë“œ ì¶”ì¶œ
```typescript
// contentPipeline.tsì— ì¶”ê°€
function extractKeyPerson(title: string): string | null {
  // ì¸ëª… íŒ¨í„´ (2-3 ë‹¨ì–´)
  const nameMatch = title.match(/([A-Z][a-z]+(?:\s[A-Z][a-z']+){1,2})/);
  if (nameMatch) return nameMatch[0];

  // ë¸Œëœë“œ/ì´ë²¤íŠ¸ (ëŒ€ë¬¸ì ë‹¨ì–´)
  const brandMatch = title.match(/([A-Z][a-z]+(?:\s[A-Z][a-z]+)?)/);
  return brandMatch ? brandMatch[0] : null;
}
```

### Phase 2: í”„ë¡¬í”„íŠ¸ ê°•í™”
```typescript
// aiRewriteService.ts ìˆ˜ì •
const keyPerson = originalTitle ? extractKeyPerson(originalTitle) : null;

const userPrompt = `...
${hasImage && keyPerson ? `
ğŸš¨ í•„ìˆ˜: ì´ ê¸°ì‚¬ëŠ” "${keyPerson}"ì— ê´€í•œ ê²ƒì…ë‹ˆë‹¤!
- ì œëª©ê³¼ ë‚´ìš©ì— "${keyPerson}"ì„(ë¥¼) ë°˜ë“œì‹œ í¬í•¨
- ë‹¤ë¥¸ ì¸ë¬¼/ì£¼ì œë¡œ ì ˆëŒ€ ë³€ê²½ ê¸ˆì§€
- ì´ë¯¸ì§€ëŠ” "${keyPerson}"ì˜ ê²ƒì…ë‹ˆë‹¤
` : ''}
...`;
```

### Phase 3: ê²€ì¦ ë° ë¡œê·¸
```typescript
// ë¦¬ë¼ì´íŒ… í›„
if (hasImage && keyPerson) {
  const mentioned = rewritten.title.includes(keyPerson) ||
                    rewritten.content.includes(keyPerson);

  if (!mentioned) {
    console.error(`âŒ ì£¼ì œ ë¶ˆì¼ì¹˜: "${keyPerson}" ëˆ„ë½!`);
    console.error(`   ì›ë³¸: ${article.title}`);
    console.error(`   ë¦¬ë¼ì´íŒ…: ${rewritten.title}`);
    // ì´ë¯¸ì§€ ì œê±°
    earlyImageUrl = null;
  } else {
    console.log(`âœ… ì£¼ì œ ì¼ì¹˜: "${keyPerson}" ìœ ì§€ë¨`);
  }
}
```

---

## ğŸ¬ ì‹¤í–‰ ì˜ˆì‹œ (ê°œì„  í›„)

### Before (í˜„ì¬)
```
ì›ë³¸: "Anya Taylor-Joy Closes Her Marrakech..."
ì´ë¯¸ì§€: Anya Taylor-Joy âœ…
í‚¤ì›Œë“œ ì¶”ì¶œ: "Anya Taylor-Joy"
í”„ë¡¬í”„íŠ¸: (ì œì•½ ì—†ìŒ)
ë¦¬ë¼ì´íŒ…: "Tom Stoppard ì—°ê·¹ ë¶„ì„" âŒ
â†’ ì£¼ì œ ë¶ˆì¼ì¹˜! ì´ë¯¸ì§€ ì œê±°
```

### After (ê°œì„ )
```
ì›ë³¸: "Anya Taylor-Joy Closes Her Marrakech..."
ì´ë¯¸ì§€: Anya Taylor-Joy âœ…
í‚¤ì›Œë“œ ì¶”ì¶œ: "Anya Taylor-Joy" âœ…
í”„ë¡¬í”„íŠ¸: "Anya Taylor-Joyë¥¼ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”" âœ…
ë¦¬ë¼ì´íŒ…: "ì•„ëƒ í…Œì¼ëŸ¬ì¡°ì´ì˜ ë§ˆë¼ì¼€ì‹œ ë ˆë“œì¹´í« íŒ¨ì…˜" âœ…
ê²€ì¦: "Anya Taylor-Joy" í¬í•¨ë¨ âœ…
â†’ ì™„ë²½í•œ ë§¤ì¹­!
```

---

**ë‹¤ìŒ ë‹¨ê³„**: Phase 1-3 êµ¬í˜„í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
ë¹„ìš© ì¶”ê°€ ì—†ì´ ì •í™•ë„ë¥¼ 80-90%ë¡œ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
